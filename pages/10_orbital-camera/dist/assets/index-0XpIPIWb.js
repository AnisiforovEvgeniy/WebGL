(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function a(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=a(n);fetch(n.href,o)}})();var O=1e-6,X=typeof Float32Array<"u"?Float32Array:Array;function P(){var e=new X(16);return X!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function ae(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function U(e,r,a){var i=r[0],n=r[1],o=r[2],c=r[3],p=r[4],d=r[5],y=r[6],l=r[7],g=r[8],u=r[9],f=r[10],L=r[11],M=r[12],s=r[13],R=r[14],E=r[15],h=a[0],A=a[1],v=a[2],m=a[3];return e[0]=h*i+A*p+v*g+m*M,e[1]=h*n+A*d+v*u+m*s,e[2]=h*o+A*y+v*f+m*R,e[3]=h*c+A*l+v*L+m*E,h=a[4],A=a[5],v=a[6],m=a[7],e[4]=h*i+A*p+v*g+m*M,e[5]=h*n+A*d+v*u+m*s,e[6]=h*o+A*y+v*f+m*R,e[7]=h*c+A*l+v*L+m*E,h=a[8],A=a[9],v=a[10],m=a[11],e[8]=h*i+A*p+v*g+m*M,e[9]=h*n+A*d+v*u+m*s,e[10]=h*o+A*y+v*f+m*R,e[11]=h*c+A*l+v*L+m*E,h=a[12],A=a[13],v=a[14],m=a[15],e[12]=h*i+A*p+v*g+m*M,e[13]=h*n+A*d+v*u+m*s,e[14]=h*o+A*y+v*f+m*R,e[15]=h*c+A*l+v*L+m*E,e}function ie(e,r,a,i){var n=i[0],o=i[1],c=i[2],p=Math.sqrt(n*n+o*o+c*c),d,y,l,g,u,f,L,M,s,R,E,h,A,v,m,F,S,b,x,w,B,T,I,_;return p<O?null:(p=1/p,n*=p,o*=p,c*=p,d=Math.sin(a),y=Math.cos(a),l=1-y,g=r[0],u=r[1],f=r[2],L=r[3],M=r[4],s=r[5],R=r[6],E=r[7],h=r[8],A=r[9],v=r[10],m=r[11],F=n*n*l+y,S=o*n*l+c*d,b=c*n*l-o*d,x=n*o*l-c*d,w=o*o*l+y,B=c*o*l+n*d,T=n*c*l+o*d,I=o*c*l-n*d,_=c*c*l+y,e[0]=g*F+M*S+h*b,e[1]=u*F+s*S+A*b,e[2]=f*F+R*S+v*b,e[3]=L*F+E*S+m*b,e[4]=g*x+M*w+h*B,e[5]=u*x+s*w+A*B,e[6]=f*x+R*w+v*B,e[7]=L*x+E*w+m*B,e[8]=g*T+M*I+h*_,e[9]=u*T+s*I+A*_,e[10]=f*T+R*I+v*_,e[11]=L*T+E*I+m*_,r!==e&&(e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e)}function oe(e,r,a,i,n){var o=1/Math.tan(r/2);if(e[0]=o/a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n!=null&&n!==1/0){var c=1/(i-n);e[10]=(n+i)*c,e[14]=2*n*i*c}else e[10]=-1,e[14]=-2*i;return e}var se=oe;function ce(e,r,a,i){var n,o,c,p,d,y,l,g,u,f,L=r[0],M=r[1],s=r[2],R=i[0],E=i[1],h=i[2],A=a[0],v=a[1],m=a[2];return Math.abs(L-A)<O&&Math.abs(M-v)<O&&Math.abs(s-m)<O?ae(e):(l=L-A,g=M-v,u=s-m,f=1/Math.sqrt(l*l+g*g+u*u),l*=f,g*=f,u*=f,n=E*u-h*g,o=h*l-R*u,c=R*g-E*l,f=Math.sqrt(n*n+o*o+c*c),f?(f=1/f,n*=f,o*=f,c*=f):(n=0,o=0,c=0),p=g*c-u*o,d=u*n-l*c,y=l*o-g*n,f=Math.sqrt(p*p+d*d+y*y),f?(f=1/f,p*=f,d*=f,y*=f):(p=0,d=0,y=0),e[0]=n,e[1]=p,e[2]=l,e[3]=0,e[4]=o,e[5]=d,e[6]=g,e[7]=0,e[8]=c,e[9]=y,e[10]=u,e[11]=0,e[12]=-(n*L+o*M+c*s),e[13]=-(p*L+d*M+y*s),e[14]=-(l*L+g*M+u*s),e[15]=1,e)}const le=`#version 300 es
    in vec4 aPosition;
    uniform mat4 uCameraMatrix;

    void main(){
        gl_Position = uCameraMatrix * aPosition;
    }
`,fe=`#version 300 es
    precision highp float;
    uniform vec4 uColor;

    out vec4 outColor;

    void main(){
        outColor = uColor;
    }
`;function de(e,r){const a=r.getBoundingClientRect(),n=window.devicePixelRatio*a.width;r.width=n,r.height=n,e.viewport(0,0,n,n)}function G(e,r,a){const i=e.createShader(r);return e.shaderSource(i,a),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)?i:(console.error(e.getShaderInfoLog(i)),null)}function he(e,r,a){const i=e.createProgram();return e.attachShader(i,r),e.attachShader(i,a),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)?i:(console.error(e.getProgramInfoLog(i)),null)}function V(e,r,a){const i=e.createVertexArray();return e.bindVertexArray(i),e.bindBuffer(e.ARRAY_BUFFER,r),e.enableVertexAttribArray(a),e.vertexAttribPointer(a,3,e.FLOAT,!1,0,0),e.bindVertexArray(null),i}const j=new Float32Array([-1,-.75,0,-1,-.75,-.7,-.3,-.75,0,-1,-.75,-.7,-.3,-.75,-.7,-.3,-.75,0,-1,.75,0,-1,.75,-.7,-.3,.75,0,-1,.75,-.7,-.3,.75,-.7,-.3,.75,0,-1,-.75,0,-.3,-.75,0,-1,.75,0,-.3,-.75,0,-1,.75,0,-.3,.75,0,-1,-.75,-.7,-.3,-.75,-.7,-1,.75,-.7,-.3,-.75,-.7,-1,.75,-.7,-.3,.75,-.7,-1,-.75,0,-1,.75,0,-1,.75,-.7,-1,-.75,0,-1,-.75,-.7,-1,.75,-.7,-.3,-.75,0,-.3,.75,0,-.3,.75,-.7,-.3,-.75,0,-.3,-.75,-.7,-.3,.75,-.7]),K=new Float32Array([-1,-.75,0,-.3,-.75,0,-1,.75,0,-.3,.75,0,-1,-.75,0,-1,.75,0,-.3,-.75,0,-.3,.75,0,-1,-.75,-.7,-.3,-.75,-.7,-1,.75,-.7,-.3,.75,-.7,-1,-.75,-.7,-1,.75,-.7,-.3,-.75,-.7,-.3,.75,-.7,-1,-.75,0,-1,-.75,-.7,-1,.75,0,-1,.75,-.7,-.3,-.75,0,-.3,-.75,-.7,-.3,.75,0,-.3,.75,-.7]),Z=new Float32Array([0,-.5,0,1,-.5,0,.5,.5,0]),J=new Float32Array([0,-.5,0,1,-.5,0,1,-.5,0,.5,.5,0,.5,.5,0,0,-.5,0]);function Ae(e,{cameraRadius:r,horizontalAngle:a,verticalAngle:i},n){let p=!1,d=0,y=0,l=r,g=a,u=i;function f(s,R){g-=s*.007,u-=R*.007,u=Math.max(-Math.PI/2+.01,Math.min(Math.PI/2-.01,u)),n({cameraRadius:l,horizontalAngle:g,verticalAngle:u})}function L(s){const R=s>0?1.2:.8;l*=R,l=Math.max(1.5,Math.min(15,l)),n({cameraRadius:l,horizontalAngle:g,verticalAngle:u})}function M(){p&&(p=!1,e.style.cursor="grab")}e.addEventListener("mousedown",s=>{s.button===0&&(p=!0,d=s.clientX,y=s.clientY,e.style.cursor="grabbing")}),window.addEventListener("mouseup",M),e.addEventListener("mousemove",s=>{if(!p)return;const R=s.clientX-d,E=s.clientY-y;d=s.clientX,y=s.clientY,f(R,E)}),e.addEventListener("wheel",s=>{s.preventDefault(),L(s.deltaY)}),e.addEventListener("touchstart",s=>{s.touches.length===1&&(p=!0,d=s.touches[0].clientX,y=s.touches[0].clientY,s.preventDefault())}),window.addEventListener("touchend",M),window.addEventListener("touchcancel",M),e.addEventListener("touchmove",s=>{if(!p||s.touches.length!==1)return;const R=s.touches[0].clientX-d,E=s.touches[0].clientY-y;d=s.touches[0].clientX,y=s.touches[0].clientY,f(R,E),s.preventDefault()})}const C=document.getElementById("canvas"),t=C.getContext("webgl2");t||alert("webgl2 не работает!!!");const ve=G(t,t.VERTEX_SHADER,le),me=G(t,t.FRAGMENT_SHADER,fe),z=he(t,ve,me);t.useProgram(z);const Q=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,Q);t.bufferData(t.ARRAY_BUFFER,j,t.STATIC_DRAW);const $=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,$);t.bufferData(t.ARRAY_BUFFER,K,t.STATIC_DRAW);const k=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,k);t.bufferData(t.ARRAY_BUFFER,Z,t.STATIC_DRAW);const ee=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,ee);t.bufferData(t.ARRAY_BUFFER,J,t.STATIC_DRAW);const D=t.getAttribLocation(z,"aPosition"),Y=t.getUniformLocation(z,"uColor"),q=t.getUniformLocation(z,"uCameraMatrix"),pe=V(t,Q,D),ue=V(t,$,D),ye=V(t,k,D),ge=V(t,ee,D),H=P(),W=P(),N=P(),re={cameraRadius:3.5,horizontalAngle:Math.PI/2,verticalAngle:.4};Ae(C,re,e=>{te(e),ne()});function te({cameraRadius:e,horizontalAngle:r,verticalAngle:a}){const i=e*Math.cos(a)*Math.cos(r),n=e*Math.sin(a),o=e*Math.cos(a)*Math.sin(r);ce(W,[i,n,o],[0,0,0],[0,1,0]),se(H,45*Math.PI/180,C.width/C.height,.1,100),U(N,H,W)}function ne(){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT);const e=P(),r=P();U(r,N,e),t.uniformMatrix4fv(q,!1,r),t.uniform4f(Y,0,.6,.9,1),t.bindVertexArray(pe),t.drawArrays(t.TRIANGLES,0,j.length/3),t.uniform4f(Y,0,0,0,1),t.bindVertexArray(ue),t.drawArrays(t.LINES,0,K.length/3);const a=P();ie(a,a,45*Math.PI/180,[-1,0,0]);const i=P();U(i,N,a),t.uniformMatrix4fv(q,!1,i),t.uniform4f(Y,.188,.835,.784,1),t.bindVertexArray(ye),t.drawArrays(t.TRIANGLES,0,Z.length/3),t.uniform4f(Y,0,0,0,1),t.bindVertexArray(ge),t.drawArrays(t.LINES,0,J.length/3)}de(t,C);te(re);ne();
