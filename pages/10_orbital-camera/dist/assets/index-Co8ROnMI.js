(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function a(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=a(n);fetch(n.href,s)}})();var O=1e-6,z=typeof Float32Array<"u"?Float32Array:Array;function E(){var e=new z(16);return z!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function ae(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function N(e,r,a){var i=r[0],n=r[1],s=r[2],o=r[3],m=r[4],d=r[5],u=r[6],l=r[7],c=r[8],y=r[9],f=r[10],R=r[11],g=r[12],M=r[13],L=r[14],P=r[15],h=a[0],A=a[1],p=a[2],v=a[3];return e[0]=h*i+A*m+p*c+v*g,e[1]=h*n+A*d+p*y+v*M,e[2]=h*s+A*u+p*f+v*L,e[3]=h*o+A*l+p*R+v*P,h=a[4],A=a[5],p=a[6],v=a[7],e[4]=h*i+A*m+p*c+v*g,e[5]=h*n+A*d+p*y+v*M,e[6]=h*s+A*u+p*f+v*L,e[7]=h*o+A*l+p*R+v*P,h=a[8],A=a[9],p=a[10],v=a[11],e[8]=h*i+A*m+p*c+v*g,e[9]=h*n+A*d+p*y+v*M,e[10]=h*s+A*u+p*f+v*L,e[11]=h*o+A*l+p*R+v*P,h=a[12],A=a[13],p=a[14],v=a[15],e[12]=h*i+A*m+p*c+v*g,e[13]=h*n+A*d+p*y+v*M,e[14]=h*s+A*u+p*f+v*L,e[15]=h*o+A*l+p*R+v*P,e}function ie(e,r,a,i){var n=i[0],s=i[1],o=i[2],m=Math.sqrt(n*n+s*s+o*o),d,u,l,c,y,f,R,g,M,L,P,h,A,p,v,F,b,S,x,B,w,T,I,_;return m<O?null:(m=1/m,n*=m,s*=m,o*=m,d=Math.sin(a),u=Math.cos(a),l=1-u,c=r[0],y=r[1],f=r[2],R=r[3],g=r[4],M=r[5],L=r[6],P=r[7],h=r[8],A=r[9],p=r[10],v=r[11],F=n*n*l+u,b=s*n*l+o*d,S=o*n*l-s*d,x=n*s*l-o*d,B=s*s*l+u,w=o*s*l+n*d,T=n*o*l+s*d,I=s*o*l-n*d,_=o*o*l+u,e[0]=c*F+g*b+h*S,e[1]=y*F+M*b+A*S,e[2]=f*F+L*b+p*S,e[3]=R*F+P*b+v*S,e[4]=c*x+g*B+h*w,e[5]=y*x+M*B+A*w,e[6]=f*x+L*B+p*w,e[7]=R*x+P*B+v*w,e[8]=c*T+g*I+h*_,e[9]=y*T+M*I+A*_,e[10]=f*T+L*I+p*_,e[11]=R*T+P*I+v*_,r!==e&&(e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e)}function se(e,r,a,i,n){var s=1/Math.tan(r/2);if(e[0]=s/a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n!=null&&n!==1/0){var o=1/(i-n);e[10]=(n+i)*o,e[14]=2*n*i*o}else e[10]=-1,e[14]=-2*i;return e}var ce=se;function oe(e,r,a,i){var n,s,o,m,d,u,l,c,y,f,R=r[0],g=r[1],M=r[2],L=i[0],P=i[1],h=i[2],A=a[0],p=a[1],v=a[2];return Math.abs(R-A)<O&&Math.abs(g-p)<O&&Math.abs(M-v)<O?ae(e):(l=R-A,c=g-p,y=M-v,f=1/Math.sqrt(l*l+c*c+y*y),l*=f,c*=f,y*=f,n=P*y-h*c,s=h*l-L*y,o=L*c-P*l,f=Math.sqrt(n*n+s*s+o*o),f?(f=1/f,n*=f,s*=f,o*=f):(n=0,s=0,o=0),m=c*o-y*s,d=y*n-l*o,u=l*s-c*n,f=Math.sqrt(m*m+d*d+u*u),f?(f=1/f,m*=f,d*=f,u*=f):(m=0,d=0,u=0),e[0]=n,e[1]=m,e[2]=l,e[3]=0,e[4]=s,e[5]=d,e[6]=c,e[7]=0,e[8]=o,e[9]=u,e[10]=y,e[11]=0,e[12]=-(n*R+s*g+o*M),e[13]=-(m*R+d*g+u*M),e[14]=-(l*R+c*g+y*M),e[15]=1,e)}const fe=`#version 300 es
    in vec4 aPosition;
    uniform mat4 uCameraMatrix;

    void main(){
        gl_Position = uCameraMatrix * aPosition;
    }
`,le=`#version 300 es
    precision highp float;
    uniform vec4 uColor;

    out vec4 outColor;

    void main(){
        outColor = uColor;
    }
`;function de(e,r){const a=r.getBoundingClientRect(),n=window.devicePixelRatio*a.width;r.width=n,r.height=n,e.viewport(0,0,n,n)}function H(e,r,a){const i=e.createShader(r);return e.shaderSource(i,a),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)?i:(console.error(e.getShaderInfoLog(i)),null)}function he(e,r,a){const i=e.createProgram();return e.attachShader(i,r),e.attachShader(i,a),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)?i:(console.error(e.getProgramInfoLog(i)),null)}function V(e,r,a){const i=e.createVertexArray();return e.bindVertexArray(i),e.bindBuffer(e.ARRAY_BUFFER,r),e.enableVertexAttribArray(a),e.vertexAttribPointer(a,3,e.FLOAT,!1,0,0),e.bindVertexArray(null),i}const j=new Float32Array([-1,-.75,0,-1,-.75,-.7,-.3,-.75,0,-1,-.75,-.7,-.3,-.75,-.7,-.3,-.75,0,-1,.75,0,-1,.75,-.7,-.3,.75,0,-1,.75,-.7,-.3,.75,-.7,-.3,.75,0,-1,-.75,0,-.3,-.75,0,-1,.75,0,-.3,-.75,0,-1,.75,0,-.3,.75,0,-1,-.75,-.7,-.3,-.75,-.7,-1,.75,-.7,-.3,-.75,-.7,-1,.75,-.7,-.3,.75,-.7,-1,-.75,0,-1,.75,0,-1,.75,-.7,-1,-.75,0,-1,-.75,-.7,-1,.75,-.7,-.3,-.75,0,-.3,.75,0,-.3,.75,-.7,-.3,-.75,0,-.3,-.75,-.7,-.3,.75,-.7]),K=new Float32Array([-1,-.75,0,-.3,-.75,0,-1,.75,0,-.3,.75,0,-1,-.75,0,-1,.75,0,-.3,-.75,0,-.3,.75,0,-1,-.75,-.7,-.3,-.75,-.7,-1,.75,-.7,-.3,.75,-.7,-1,-.75,-.7,-1,.75,-.7,-.3,-.75,-.7,-.3,.75,-.7,-1,-.75,0,-1,-.75,-.7,-1,.75,0,-1,.75,-.7,-.3,-.75,0,-.3,-.75,-.7,-.3,.75,0,-.3,.75,-.7]),J=new Float32Array([0,-.5,0,1,-.5,0,.5,.5,0]),Q=new Float32Array([0,-.5,0,1,-.5,0,1,-.5,0,.5,.5,0,.5,.5,0,0,-.5,0]);function Ae(e,{cameraRadius:r,horizontalAngle:a,verticalAngle:i},n){let o=!1,m=0,d=0;function u(c,y){a-=c*.007,i-=y*.007,i=Math.max(-Math.PI/2+.01,Math.min(Math.PI/2-.01,i)),n({cameraRadius:r,horizontalAngle:a,verticalAngle:i})}function l(){o&&(o=!1,e.style.cursor="grab")}e.addEventListener("mousedown",c=>{c.button===0&&(o=!0,m=c.clientX,d=c.clientY,e.style.cursor="grabbing")}),window.addEventListener("mouseup",l),e.addEventListener("mousemove",c=>{if(!o)return;const y=c.clientX-m,f=c.clientY-d;m=c.clientX,d=c.clientY,u(y,f)}),e.addEventListener("touchstart",c=>{c.touches.length===1&&(o=!0,m=c.touches[0].clientX,d=c.touches[0].clientY,c.preventDefault())}),window.addEventListener("touchend",l),window.addEventListener("touchcancel",l),e.addEventListener("touchmove",c=>{if(!o||c.touches.length!==1)return;const y=c.touches[0].clientX-m,f=c.touches[0].clientY-d;m=c.touches[0].clientX,d=c.touches[0].clientY,u(y,f),c.preventDefault()})}const C=document.getElementById("canvas"),t=C.getContext("webgl2");t||alert("webgl2 не работает!!!");const pe=H(t,t.VERTEX_SHADER,fe),ve=H(t,t.FRAGMENT_SHADER,le),D=he(t,pe,ve);t.useProgram(D);const Z=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,Z);t.bufferData(t.ARRAY_BUFFER,j,t.STATIC_DRAW);const $=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,$);t.bufferData(t.ARRAY_BUFFER,K,t.STATIC_DRAW);const k=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,k);t.bufferData(t.ARRAY_BUFFER,J,t.STATIC_DRAW);const ee=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,ee);t.bufferData(t.ARRAY_BUFFER,Q,t.STATIC_DRAW);const U=t.getAttribLocation(D,"aPosition"),Y=t.getUniformLocation(D,"uColor"),q=t.getUniformLocation(D,"uCameraMatrix"),me=V(t,Z,U),ye=V(t,$,U),ue=V(t,k,U),Re=V(t,ee,U),W=E(),G=E(),X=E(),re={cameraRadius:3.5,horizontalAngle:Math.PI/2,verticalAngle:.4};Ae(C,re,e=>{te(e),ne()});function te({cameraRadius:e,horizontalAngle:r,verticalAngle:a}){const i=e*Math.cos(a)*Math.cos(r),n=e*Math.sin(a),s=e*Math.cos(a)*Math.sin(r);oe(G,[i,n,s],[0,0,0],[0,1,0]),ce(W,45*Math.PI/180,C.width/C.height,.1,100),N(X,W,G)}function ne(){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT);const e=E(),r=E();N(r,X,e),t.uniformMatrix4fv(q,!1,r),t.uniform4f(Y,0,.6,.9,1),t.bindVertexArray(me),t.drawArrays(t.TRIANGLES,0,j.length/3),t.uniform4f(Y,0,0,0,1),t.bindVertexArray(ye),t.drawArrays(t.LINES,0,K.length/3);const a=E();ie(a,a,45*Math.PI/180,[-1,0,0]);const i=E();N(i,X,a),t.uniformMatrix4fv(q,!1,i),t.uniform4f(Y,.188,.835,.784,1),t.bindVertexArray(ue),t.drawArrays(t.TRIANGLES,0,J.length/3),t.uniform4f(Y,0,0,0,1),t.bindVertexArray(Re),t.drawArrays(t.LINES,0,Q.length/3)}de(t,C);te(re);ne();
